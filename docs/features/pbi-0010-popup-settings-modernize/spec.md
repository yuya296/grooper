# Requirement

- [ ] Purpose / value: Popupから設定画面への到達性を改善し、Options UIを現代的な見た目と操作性へ刷新する。
- [ ] Scope:
  - Popupに設定画面への導線（ボタン/リンク）を追加
  - Options UIのモダナイズ（レイアウト/タイポグラフィ/コンポーネントの統一）
  - Rules編集をテーブル中心UIへ再設計（D&D並び替え + サイドパネル詳細編集）
  - UIコンポーネントライブラリ候補の比較と採用方針決定（ユーザー合意）
  - 既存の設定機能（YAML編集/検証/保存）を維持したUI置換
- [ ] Out of scope:
  - 新しい設定項目の追加
  - ルール評価ロジック/バックグラウンド動作の仕様変更
  - 診断API/CLIの機能追加
- [ ] Assumptions:
  - UIライブラリは既存ビルドパイプラインで扱える構成を採用する
  - ライブラリ選定は実装前に候補提示し、ユーザー合意を得る
- [ ] Risks:
  - 見た目変更に伴う既存操作フローの混乱
  - ライブラリ導入によるバンドルサイズ増加
  - Popupサイズ制約で導線UIが窮屈になる可能性

# Acceptance Criteria

- [ ] AC1: Popupから1クリックでOptions（設定画面）へ遷移できる。
- [ ] AC2: Options UIがモダナイズされ、主要操作（Validate/Save）が同等機能で実行できる。
- [ ] AC2.1: Rules一覧はテーブル表示でD&Dによる順序変更ができる。
- [ ] AC2.2: Rulesタイトルクリックでサイドパネルを開き、詳細編集ができる。
- [ ] AC2.3: Source/UI いずれの編集でも、保存前は `chrome.storage.local` へ反映されない（保存ボタン実行時のみ反映）。
- [ ] AC2.4: 変更前後YAMLに差分がある場合のみ保存ボタンが有効化され、差分がない場合は無効化される。
- [ ] AC2.5: 未保存変更がある状態でタブ/ページを閉じると、ブラウザ標準の離脱警告が表示される。
- [ ] AC2.6: `＋` 押下時は空ルールを即追加せず、右ドロワーで必須項目（Group/Pattern）入力後に保存して一覧へ追加する。
- [ ] AC3: UIコンポーネントライブラリの採用理由・代替比較が記録され、ユーザー合意を得ている。
- [ ] AC4: 既存ユニットテストおよび関連UIテストが回帰なく通る。

# Notes

- 選定方針: D&Dリストなど利用予定パーツが、周辺エコシステム込みで短期実装できるライブラリを優先する。
- 候補ライブラリは `shadcn/ui`, `Chakra UI`, `MUI` を初期候補として比較し、最終決定は実装前に確定する。
- `shadcn/ui` は `@tanstack/react-table` と `dnd-kit` の併用で、テーブルD&D要件を満たす有力候補として扱う。
- 設計詳細は `docs/features/pbi-0010-popup-settings-modernize/design.md` を正本とする。
