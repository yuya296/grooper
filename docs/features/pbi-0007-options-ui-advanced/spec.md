# Requirement

- [ ] Purpose / value: 変更の影響を事前に把握し、安心して設定変更できる。
- [ ] Scope:
  - 反映前プレビュー（どのタブがどのグループへ行くか）
  - 変更履歴/バックアップ
  - ロールバック（直前のバックアップへ戻す）
  - ユニットテスト（TDD）
- [ ] Out of scope:
  - 診断API/CLI/E2E
- [ ] Assumptions:
  - プレビューはdry-runのplan生成に基づく
- [ ] Risks:
  - プレビューと実際の挙動に差分が出る可能性

# Acceptance Criteria

- [ ] AC1: 反映前にプレビューを表示できる。
- [ ] AC2: 変更履歴/バックアップが保存される。
- [ ] AC3: 直前のバックアップへロールバックできる。
- [ ] AC4: 履歴/プレビューのロジックにユニットテスト（TDD）がある。

# Notes

- プレビュー/履歴運用フロー（手動確認手順）:
  1. OptionsでYAMLを編集後、`プレビュー`を実行し、`move/ensure/close`アクションが期待通り表示されることを確認する。
  2. `保存`を実行し、`History`に時刻エントリが追加されることを確認する。
  3. 再度設定を変更して保存し、履歴が先頭追加されることを確認する。
  4. `ロールバック`を実行し、1件前のYAMLへ復元されることを確認する。
  5. ロールバック後に履歴が1件消費され、同じエントリへ連続ロールバックされないことを確認する。
